<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">
    <p class="navbar-brand paragraphLogo paragraphLogoResult">
      <a href="#" class="logo-link">
        <span style='color: blue'>C</span>
        <span style='color: red'>r</span>
        <span style='color: orange'>a</span>
        <span style='color: blue'>a</span>
        <span style='color: green'>s</span>
      </a>
    </p>
  </a>
  <app-search #search></app-search>
  <mat-form-field>
    <mat-select placeholder="Select entity types..." [formControl]="entityCtrl" multiple (selectionChange)="applyFilters()">
      <mat-select-trigger>
        {{entityCtrl.value ? (entityCtrl.value.length >= entityTypes?.length ? 'All' : entityCtrl.value) : ''}}
      </mat-select-trigger>
      <mat-option *ngFor="let entityType of entityTypes" [value]="entityType" dense>
        <mat-icon>{{getIcon(entityType)}}</mat-icon>{{entityType}}
      </mat-option>
    </mat-select>
    <mat-icon matPrefix matTooltip="You must select one option" *ngIf="entityCtrl.value?.length <= 0">error</mat-icon>
  </mat-form-field>
  <mat-form-field>
    <mat-select placeholder="Select list types..." [formControl]="listTypeCtrl" multiple (selectionChange)="applyFilters()">
      <mat-select-trigger>
        {{listTypeCtrl.value ? (listTypeCtrl.value.length >= listTypes?.length ? 'All' : listTypeCtrl.value) : ''}}
      </mat-select-trigger>
      <mat-option *ngFor="let listType of listTypes" [value]="listType" dense>{{listType}}</mat-option>
    </mat-select>
    <mat-icon matPrefix matTooltip="You must select one option" *ngIf="listTypeCtrl.value?.length <= 0">error</mat-icon>
  </mat-form-field>
  <mat-form-field>
    <mat-select placeholder="Select countries..." [formControl]="countryCtrl" multiple (selectionChange)="applyFilters()">
      <mat-select-trigger>
        {{countryCtrl.value ? (countryCtrl.value.length >= countries?.length ? 'All' : countryCtrl.value) : ''}}
      </mat-select-trigger>
      <mat-option *ngFor="let country of countries" [value]="country" dense>{{country}}</mat-option>
    </mat-select>
    <mat-icon matPrefix matTooltip="You must select one option" *ngIf="countryCtrl.value?.length <= 0">error</mat-icon>
  </mat-form-field>
  <mat-form-field>
    <input matInput [formControl]="startDate" [matDatepicker]="startPicker" placeholder="Listed on from" (dateChange)="applyFilters()">
    <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
    <mat-datepicker #startPicker></mat-datepicker>
  </mat-form-field>
  <mat-form-field>
    <input matInput [formControl]="endDate" [matDatepicker]="endPicker" placeholder="Listed on to" (dateChange)="applyFilters()">
    <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
    <mat-datepicker #endPicker></mat-datepicker>
  </mat-form-field>
</nav>

<div class="result-count">
  {{results?.length + " results"}} {{results?.length !== allResults?.length ? " ("+ allResults?.length +")" : ""}}
</div>

<mat-drawer-container>
  <mat-drawer-content>

    <mat-selection-list #resultList (selectionChange)="onResultSelected($event)" dense>
      <mat-list-option *ngFor="let result of pagedResults" [value]="result" class="hide-mat-checkbox">

        <p matLine>
          <mat-icon matPrefix>{{getIcon(result.entityType)}}</mat-icon>
          {{result.displayName}} score: {{result.score}}
        </p>
        <p matLine>{{result.listType}}</p>
      </mat-list-option>
    </mat-selection-list>
    <!-- pager -->
    <div class="nav-scroller py-1 mb-2">
      <nav class="nav d-flex justify-content-center">
        <ul class="pagination flex-sm-wrap">
          <div class="content-container">
            <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
              <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                <a class="page-link" (click)="setPage(1)"><mat-icon>first_page</mat-icon></a>
              </li>
              <li class="page-item" [ngClass]="{disabled:pager.currentPage === 1}">
                <a class="page-link" (click)="setPage(pager.currentPage - 1)"><mat-icon>chevron_left</mat-icon></a>
              </li>
              <li class="page-item" *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
                <a class="page-link" (click)="setPage(page)">{{page}}</a>
              </li>
              <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                <a class="page-link" (click)="setPage(pager.currentPage + 1)"><mat-icon>chevron_right</mat-icon></a>
              </li>
              <li class="page-item" [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
                <a class="page-link" (click)="setPage(pager.totalPages)"><mat-icon>last_page</mat-icon></a>
              </li>
            </ul>
          </div>
        </ul>
      </nav>
    </div>
    <!-- pager -->
  </mat-drawer-content>
  <mat-drawer mode="side" opened #sidenav position="end" class="sidenav-ex">
    <div [hidden]="!isMobile">
      <mat-icon matSuffix (click)="sidenav.toggle()" class="mobile-toggle">close</mat-icon>
    </div>
    <app-detail #detail></app-detail>
  </mat-drawer>
</mat-drawer-container>

